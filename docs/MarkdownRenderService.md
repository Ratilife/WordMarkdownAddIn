# –ú–æ–¥—É–ª—å MarkdownRenderService

## –û–ø–∏—Å–∞–Ω–∏–µ
–°–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è Markdown —Ç–µ–∫—Å—Ç–∞ –≤ HTML —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Markdig. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Markdown, –≤–∫–ª—é—á–∞—è —Ç–∞–±–ª–∏—Ü—ã, —Å–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á, –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã Mermaid.

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### ‚úÖ –ë–∞–∑–æ–≤–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Markdown ‚Üí HTML
- –ú–µ—Ç–æ–¥ `RenderoHtml()` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É Markdig –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –∏ null –∑–Ω–∞—á–µ–Ω–∏–π

### ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Markdig
- **Advanced Extensions**: –í–∫–ª—é—á–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —á–µ—Ä–µ–∑ `.UseAdvancedExtensions()`
- **Pipe Tables**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∞–±–ª–∏—Ü –≤ —Ñ–æ—Ä–º–∞—Ç–µ `| col1 | col2 |`
- **Task Lists**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ–∫–±–æ–∫—Å–æ–≤ `- [ ]` –∏ `- [x]`
- **Mathematics**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º—É–ª LaTeX

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ Mermaid –¥–∏–∞–≥—Ä–∞–º–º
- –ú–µ—Ç–æ–¥ `TransformMermaidBlocks()` - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –±–ª–æ–∫–∏ –∫–æ–¥–∞ Mermaid
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ –±–ª–æ–∫–æ–≤ `<pre><code class="language-mermaid">`
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ `<div class="mermaid">` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- HTML –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–∏–∞–≥—Ä–∞–º–º—ã

### ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `RegexOptions.Compiled` –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–µ–¥–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `RegexOptions.IgnoreCase` –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

## –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–ø–∏—Å–∞—Ç—å

### üî® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è**: –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ Markdown
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ Markdown –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π Markdig**: –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –æ—à–∏–±–æ–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

### üî® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Markdig
- **Emoji**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–º–æ–¥–∑–∏ —á–µ—Ä–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Emoji
- **Figures**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–≥—É—Ä —Å –ø–æ–¥–ø–∏—Å—è–º–∏
- **Citations**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–π
- **Footnotes**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–Ω–æ—Å–æ–∫
- **Media Links**: –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞-—Å—Å—ã–ª–æ–∫
- **Definition Lists**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ø–∏—Å–∫–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- **Abbreviations**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä

### üî® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ CSS –∫–ª–∞—Å—Å–æ–≤**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã HTML —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å inline —Å—Ç–∏–ª–∏
- **ID –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- **–Ø–∫–æ—Ä—è –¥–ª—è —Å—Å—ã–ª–æ–∫**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —è–∫–æ—Ä–µ–π –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### üî® –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–ª—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —á–∞—Å—Ç–µ–π
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### üî® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- **–≠–∫—Å–ø–æ—Ä—Ç –≤ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã**: 
  - Plain Text (–±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
  - PDF (—á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É)
  - DOCX (–ø—Ä—è–º–æ–π —ç–∫—Å–ø–æ—Ä—Ç –≤ Word)

### üî® –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞—Å—Ç–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä**: –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –≤–ª–æ–∂–µ–Ω–∏–π
- **–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

### üî® –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö –≤ Markdown
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å—Å—ã–ª–æ–∫ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü**: –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü

### üî® –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞**: –ü–æ–¥—Å—á–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, —Å—Å—ã–ª–æ–∫, —Ç–∞–±–ª–∏—Ü)
- **–ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏**: –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è—Ö**: –û—Ç—á–µ—Ç –æ–± –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è—Ö Markdown

## –û—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

### ‚ùå –û–ø–µ—á–∞—Ç–∫–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –º–µ—Ç–æ–¥–∞
- –ú–µ—Ç–æ–¥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `RenderoHtml()` –≤–º–µ—Å—Ç–æ `RenderHtml()` –∏–ª–∏ `RenderToHtml()`
- –û–ø–µ—á–∞—Ç–∫–∞: "Render**o**Html" –≤–º–µ—Å—Ç–æ "Render**T**oHtml" –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ "RenderHtml"
- –≠—Ç–æ –º–æ–∂–µ—Ç –≤–≤–æ–¥–∏—Ç—å –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ –∏ –Ω–∞—Ä—É—à–∞—Ç—å –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å `Markdown.ToHtml()`
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π HTML –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### ‚ùå –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π HTML, –¥–∞–∂–µ –µ—Å–ª–∏ Markdown –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑, –¥–∞–∂–µ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ Mermaid
- –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### ‚ùå –ù–µ–ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Mermaid
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–ª–æ–∫–∏ –∫–æ–¥–∞ —Å –∫–ª–∞—Å—Å–æ–º `language-mermaid`
- –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±–ª–æ–∫–∏ —Å –¥—Ä—É–≥–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –∫–ª–∞—Å—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `lang-mermaid`)
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–µ –Ω–∞–π—Ç–∏ –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å HTML –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- `WebUtility.HtmlDecode()` –º–æ–∂–µ—Ç –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Å–ª—É—á–∞–∏
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ HTML —Å—É—â–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç –æ—Å—Ç–∞—Ç—å—Å—è –Ω–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏
- –í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏

### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ Markdown
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null (—Ö–æ—Ç—è –µ—Å—Ç—å `?? string.Empty`)
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç

### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç–∏
- Pipeline —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ —É–±—Ä–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- –ù–µ—Ç —Å–ø–æ—Å–æ–±–∞ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –±–æ–ª—å—à–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–ª–∏ –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ UI

### ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞**:
   ```csharp
   public string RenderToHtml(string markdown)  // –∏–ª–∏ RenderHtml
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫**:
   ```csharp
   public string RenderToHtml(string markdown)
   {
       try
       {
           markdown = markdown ?? string.Empty;
           var html = Markdown.ToHtml(markdown, _pipeline);
           html = TransformMermaidBlocks(html);
           return html;
       }
       catch (Exception ex)
       {
           // –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É
           System.Diagnostics.Debug.WriteLine($"–û—à–∏–±–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ Markdown: {ex.Message}");
           return $"<p>–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ Markdown: {ex.Message}</p>";
       }
   }
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   ```csharp
   private readonly Dictionary<string, string> _cache = new Dictionary<string, string>();
   
   public string RenderToHtml(string markdown)
   {
       if (_cache.TryGetValue(markdown, out var cached))
           return cached;
       
       var html = /* ... —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ ... */;
       _cache[markdown] = html;
       return html;
   }
   ```

4. **–°–¥–µ–ª–∞—Ç—å pipeline –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º**:
   ```csharp
   private readonly MarkdownPipeline _pipeline;
   
   public MarkdownRenderService(MarkdownPipeline pipeline = null)
   {
       _pipeline = pipeline ?? CreateDefaultPipeline();
   }
   
   private static MarkdownPipeline CreateDefaultPipeline()
   {
       return new MarkdownPipelineBuilder()
           .UseAdvancedExtensions()
           .UsePipeTables()
           .UseTaskLists()
           .UseMathematics()
           .Build();
   }
   ```

5. **–£–ª—É—á—à–∏—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è Mermaid**:
   ```csharp
   private static readonly Regex MermaidPreCodeRegex = new Regex(
       @"<pre><code\s+class=[""'](?:language-|lang-)?mermaid[""']>([\s\S]*?)</code></pre>",
       RegexOptions.Compiled | RegexOptions.IgnoreCase);
   ```

6. **–î–æ–±–∞–≤–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é**:
   ```csharp
   public async Task<string> RenderToHtmlAsync(string markdown)
   {
       return await Task.Run(() => RenderToHtml(markdown));
   }
   ```

7. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ä–∞–∑–º–µ—Ä–∞**:
   ```csharp
   private const int MaxMarkdownLength = 10_000_000; // 10 MB
   
   if (markdown.Length > MaxMarkdownLength)
   {
       throw new ArgumentException("Markdown —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏");
   }
   ```

8. **–î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã**:
   - –¢–µ—Å—Ç—ã –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
   - –¢–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
   - –¢–µ—Å—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ Mermaid
   - –¢–µ—Å—Ç—ã –¥–ª—è –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

9. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É Mermaid**:
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –±–ª–æ–∫–æ–≤
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –¥–∏–∞–≥—Ä–∞–º–º–∞—Ö
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Mermaid

10. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏**:
    - –í—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
    - –†–∞–∑–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π








